<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitness Comeback Plan Infographic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Kanit', sans-serif;
            background-color: #f0f2f5;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .kpi-card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
        .gemini-btn {
            background-color: #3357FF;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: background-color 0.3s ease;
            cursor: pointer;
        }
        .gemini-btn:hover {
            background-color: #2546d7;
        }
        .gemini-btn:disabled {
            background-color: #a0aec0;
            cursor: not-allowed;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-radius: 50%;
            border-top: 4px solid #3357FF;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .tab-btn {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            font-weight: 600;
            color: #6b7280; /* gray-500 */
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        .tab-btn.active, .tab-btn:hover {
            color: #3357FF;
            border-bottom-color: #3357FF;
        }
        .workout-list {
            list-style: none;
            padding: 0;
            text-align: left;
            margin-top: 0.5rem;
        }
        .workout-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.875rem; /* text-sm */
            color: #4b5563; /* gray-600 */
            border-bottom: 1px solid #e5e7eb; /* gray-200 */
            padding: 0.5rem 0;
        }
        .workout-list li:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-[#3357FF] mb-2">Your Fitness Comeback</h1>
            <p class="text-lg md:text-xl text-gray-600">‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ü‡∏¥‡∏ï‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡πà‡∏á‡∏¢‡∏∑‡∏ô</p>
        </header>

        <section id="philosophy" class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-8">‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å‡∏ä‡πà‡∏ß‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="kpi-card">
                    <div class="text-4xl mb-3">üî•</div>
                    <h3 class="text-xl font-semibold text-[#FF5733]">‡∏ß‡∏≠‡∏£‡πå‡∏°‡∏≠‡∏±‡∏û‡πÄ‡∏™‡∏°‡∏≠</h3>
                    <p class="text-gray-600 mt-2">5-10 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠ ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ö‡∏≤‡∏î‡πÄ‡∏à‡πá‡∏ö</p>
                </div>
                <div class="kpi-card">
                    <div class="text-4xl mb-3">üîÑ</div>
                    <h3 class="text-xl font-semibold text-[#33FF57]">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 2 ‡πÄ‡∏ã‡πá‡∏ï</h3>
                    <p class="text-gray-600 mt-2">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏ô‡πÄ‡∏Ñ‡∏¢‡πÉ‡∏ô 1-2 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡πÅ‡∏£‡∏Å ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πá‡∏ô 3 ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏°</p>
                </div>
                <div class="kpi-card">
                    <div class="text-4xl mb-3">‚è≥</div>
                    <h3 class="text-xl font-semibold text-[#F1C40F]">‡∏û‡∏±‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠</h3>
                    <p class="text-gray-600 mt-2">‡∏û‡∏±‡∏Å‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏ã‡πá‡∏ï 1:30 - 2:00 ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÑ‡∏î‡πâ‡∏ü‡∏∑‡πâ‡∏ô‡∏ï‡∏±‡∏ß</p>
                </div>
                <div class="kpi-card">
                    <div class="text-4xl mb-3">üßò‚Äç‚ôÄÔ∏è</div>
                    <h3 class="text-xl font-semibold text-[#FF33A1]">‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢</h3>
                    <p class="text-gray-600 mt-2">‡∏à‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤ 30 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏û‡∏±‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏¢‡∏Ñ‡∏∞‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≤‡∏£‡πå‡∏î‡∏¥‡πÇ‡∏≠‡πÄ‡∏ö‡∏≤‡πÜ</p>
                </div>
            </div>
        </section>
        
        <section id="3-month-plan" class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-8">‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô: Progressive Overload</h2>
            <div class="bg-white rounded-lg shadow-md p-6">
                <p class="text-center text-gray-600 mb-6">
                    ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏Ñ‡πà‡∏≠‡∏¢‡πÜ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏°‡πà‡∏ô‡∏≤‡∏ô‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ß‡∏±‡∏ô ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÅ‡∏ú‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
                </p>
        
                <div class="flex flex-wrap justify-center border-b border-gray-200 mb-6">
                    <button id="btn-month-1" class="tab-btn active">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</button>
                    <button id="btn-month-2" class="tab-btn">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô</button>
                    <button id="btn-month-3" class="tab-btn">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏™‡∏π‡πà‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á</button>
                </div>
        
                <div id="plan-month-1" class="tab-content">
                    <h3 class="text-2xl font-bold text-center mb-4 text-[#3357FF]">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: Foundation (Full Body 3 ‡∏ß‡∏±‡∏ô/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)</h3>
                    <p class="text-center text-gray-600 mb-6">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡πÄ‡∏ô‡πâ‡∏ô‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á‡∏ó‡∏±‡πà‡∏ß‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢ ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠</p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                        <div class="p-4 bg-blue-50 rounded-lg">
                            <p class="font-bold">‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå: Full Body A</p>
                            <p class="text-xs text-gray-500 mb-2">‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏™‡πà‡∏ß‡∏ô</p>
                            <ul class="workout-list">
                                <li><span>Bodyweight Squat</span><span class="font-mono text-gray-500">3x10-15</span></li>
                                <li><span>Ring Rows</span><span class="font-mono text-gray-500">3x8-12</span></li>
                                <li><span>Ring Push-ups</span><span class="font-mono text-gray-500">3x8-12</span></li>
                                <li><span>Glute Bridge</span><span class="font-mono text-gray-500">3x12-15</span></li>
                                <li><span>Plank</span><span class="font-mono text-gray-500">3x30-60‡∏ß‡∏¥</span></li>
                            </ul>
                        </div>
                        <div class="p-4 bg-blue-50 rounded-lg">
                            <p class="font-bold">‡∏ß‡∏±‡∏ô‡∏û‡∏∏‡∏ò: Full Body B</p>
                            <p class="text-xs text-gray-500 mb-2">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏£‡∏á‡∏î‡∏∂‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏•‡∏≥‡∏ï‡∏±‡∏ß</p>
                            <ul class="workout-list">
                                <li><span>Lunges</span><span class="font-mono text-gray-500">3x8-10</span></li>
                                <li><span>Assisted Chin-ups</span><span class="font-mono text-gray-500">3x3-6</span></li>
                                <li><span>Shoulder Push-up</span><span class="font-mono text-gray-500">3x5-8</span></li>
                                <li><span>Hanging Knee Raises</span><span class="font-mono text-gray-500">3x8-12</span></li>
                                <li><span>Ring Face Pulls</span><span class="font-mono text-gray-500">3x10-12</span></li>
                            </ul>
                        </div>
                        <div class="p-4 bg-blue-50 rounded-lg">
                            <p class="font-bold">‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå: Full Body C</p>
                             <p class="text-xs text-gray-500 mb-2">‡∏ï‡πà‡∏≠‡∏¢‡∏≠‡∏î‡∏ó‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô</p>
                             <ul class="workout-list">
                                <li><span>Split Squat</span><span class="font-mono text-gray-500">3x8-12</span></li>
                                <li><span>Ring Rows (Harder)</span><span class="font-mono text-gray-500">3x8-12</span></li>
                                <li><span>Ring Push-ups (Harder)</span><span class="font-mono text-gray-500">3x8-12</span></li>
                                <li><span>Assisted Chin-ups</span><span class="font-mono text-gray-500">3x4-8</span></li>
                                <li><span>Ring Bicep Curl</span><span class="font-mono text-gray-500">3x8-10</span></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div id="plan-month-2" class="tab-content hidden">
                    <h3 class="text-2xl font-bold text-center mb-4 text-[#3357FF]">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: Intensification (Upper/Lower Split 3 ‡∏ß‡∏±‡∏ô/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)</h3>
                    <p class="text-center text-gray-600 mb-6">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏¢‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡∏û‡∏±‡∏Å‡∏ü‡∏∑‡πâ‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà</p>
                     <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                        <div class="p-4 bg-orange-50 rounded-lg">
                            <p class="font-bold">‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå: Upper Body</p>
                            <p class="text-xs text-gray-500 mb-2">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏ô</p>
                             <ul class="workout-list">
                                <li><span>Ring Push-ups</span><span class="font-mono text-gray-500">3x8-12</span></li>
                                <li><span>Chin-ups</span><span class="font-mono text-gray-500">3x5-8</span></li>
                                <li><span>Ring Dips</span><span class="font-mono text-gray-500">3x6-10</span></li>
                                <li><span>Ring Rows</span><span class="font-mono text-gray-500">3x10-15</span></li>
                                <li><span>Shoulder Push-ups</span><span class="font-mono text-gray-500">3x6-10</span></li>
                            </ul>
                        </div>
                        <div class="p-4 bg-green-50 rounded-lg">
                            <p class="font-bold">‡∏ß‡∏±‡∏ô‡∏û‡∏∏‡∏ò: Lower Body & Core</p>
                            <p class="text-xs text-gray-500 mb-2">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á‡∏Ç‡∏≤‡πÅ‡∏•‡∏∞‡∏ó‡πâ‡∏≠‡∏á</p>
                            <ul class="workout-list">
                                <li><span>Goblet Squat</span><span class="font-mono text-gray-500">3x8-12</span></li>
                                <li><span>Lunges</span><span class="font-mono text-gray-500">3x10-12</span></li>
                                <li><span>Glute Bridge</span><span class="font-mono text-gray-500">3x12-15</span></li>
                                <li><span>Nordic Ham Curls</span><span class="font-mono text-gray-500">3x5-8</span></li>
                                <li><span>Hanging Knee Raises</span><span class="font-mono text-gray-500">3x10-15</span></li>
                            </ul>
                        </div>
                        <div class="p-4 bg-orange-50 rounded-lg">
                            <p class="font-bold">‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå: Upper Body</p>
                            <p class="text-xs text-gray-500 mb-2">‡πÄ‡∏û‡∏¥‡πà‡∏° Volume ‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏ô</p>
                             <ul class="workout-list">
                                <li><span>Ring Dips</span><span class="font-mono text-gray-500">3x8-12</span></li>
                                <li><span>Wide Pull-ups</span><span class="font-mono text-gray-500">3x5-8</span></li>
                                <li><span>Bulgarian Push-ups</span><span class="font-mono text-gray-500">3x10-15</span></li>
                                <li><span>Ring Face Pulls</span><span class="font-mono text-gray-500">3x12-15</span></li>
                                <li><span>Tricep Extensions</span><span class="font-mono text-gray-500">3x8-12</span></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div id="plan-month-3" class="tab-content hidden">
                    <h3 class="text-2xl font-bold text-center mb-4 text-[#3357FF]">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: Specialization (Push/Pull/Legs 3 ‡∏ß‡∏±‡∏ô/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)</h3>
                    <p class="text-center text-gray-600 mb-6">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡πÅ‡∏ö‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß (‡∏ú‡∏•‡∏±‡∏Å, ‡∏î‡∏∂‡∏á, ‡∏Ç‡∏≤) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ù‡∏∂‡∏Å‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏ô‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</p>
                     <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                        <div class="p-4 bg-red-50 rounded-lg">
                            <p class="font-bold">‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå: Push Day</p>
                            <p class="text-xs text-gray-500 mb-2">‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ú‡∏•‡∏±‡∏Å</p>
                             <ul class="workout-list">
                                <li><span>Ring Dips</span><span class="font-mono text-gray-500">4x6-10</span></li>
                                <li><span>Ring Push-ups</span><span class="font-mono text-gray-500">4x10-15</span></li>
                                <li><span>Shoulder Push-ups</span><span class="font-mono text-gray-500">4x6-10</span></li>
                                <li><span>Tricep Extensions</span><span class="font-mono text-gray-500">4x8-12</span></li>
                            </ul>
                        </div>
                        <div class="p-4 bg-purple-50 rounded-lg">
                            <p class="font-bold">‡∏ß‡∏±‡∏ô‡∏û‡∏∏‡∏ò: Pull Day</p>
                            <p class="text-xs text-gray-500 mb-2">‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏î‡∏∂‡∏á</p>
                            <ul class="workout-list">
                                <li><span>Wide Pull-ups</span><span class="font-mono text-gray-500">4x6-10</span></li>
                                <li><span>Archer Rows</span><span class="font-mono text-gray-500">4x5-8</span></li>
                                <li><span>Ring Face Pulls</span><span class="font-mono text-gray-500">4x12-15</span></li>
                                <li><span>Ring Bicep Curls</span><span class="font-mono text-gray-500">4x8-12</span></li>
                            </ul>
                        </div>
                        <div class="p-4 bg-green-50 rounded-lg">
                            <p class="font-bold">‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå: Leg Day</p>
                            <p class="text-xs text-gray-500 mb-2">‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤</p>
                             <ul class="workout-list">
                                <li><span>Pistol Squat Progressions</span><span class="font-mono text-gray-500">4x5-8</span></li>
                                <li><span>Nordic Ham Curls</span><span class="font-mono text-gray-500">4x6-10</span></li>
                                <li><span>Goblet Squat</span><span class="font-mono text-gray-500">4x10-15</span></li>
                                <li><span>Lunges</span><span class="font-mono text-gray-500">4x10-12</span></li>
                                <li><span>L-Sit</span><span class="font-mono text-gray-500">4x15-30‡∏ß‡∏¥</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <section id="workout-analysis" class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-8">Workout Analysis & Progression</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-2xl font-bold mb-4 text-[#3357FF]">Month 1: Muscle Group Focus</h3>
                    <p class="text-gray-600 mb-6">‡πÉ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÅ‡∏£‡∏Å ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å‡∏ó‡∏∏‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡∏î‡∏∏‡∏•‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á</p>
                    <div class="chart-container">
                        <canvas id="workoutAChart"></canvas>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-2xl font-bold mb-4 text-[#3357FF]">Month 2: Upper vs. Lower Volume</h3>
                     <p class="text-gray-600 mb-6">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏á‡∏à‡∏∞‡πÅ‡∏ö‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° Volume (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡πà‡∏≤ x ‡πÄ‡∏ã‡πá‡∏ï x ‡∏Ñ‡∏£‡∏±‡πâ‡∏á) ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô</p>
                    <div class="chart-container">
                        <canvas id="workoutBChart"></canvas>
                    </div>
                </div>

                <div class="lg:col-span-2 bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-2xl font-bold mb-4 text-[#3357FF]">3-Month Strength Progression</h3>
                     <p class="text-gray-600 mb-6">‡∏Å‡∏£‡∏≤‡∏ü‡∏ô‡∏µ‡πâ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ù‡∏∂‡∏Å‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏Å Progressive Overload ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏ó‡∏µ‡∏•‡∏∞‡∏ô‡πâ‡∏≠‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠</p>
                    <div class="chart-container">
                        <canvas id="progressionChart"></canvas>
                    </div>
                </div>

            </div>
        </section>

        <section id="gemini-features" class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-8">‚ú® Gemini AI Fitness Coach</h2>
            
            <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                <h3 class="text-2xl font-bold mb-4 text-[#3357FF]">‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏†‡∏≤‡∏û‡∏™‡∏≤‡∏ò‡∏¥‡∏ï‡∏ó‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢</h3>
                <p class="text-gray-600 mb-6">‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ó‡πà‡∏≤‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£? ‡πÉ‡∏´‡πâ Gemini ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏û‡∏™‡∏≤‡∏ò‡∏¥‡∏ï‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏î‡∏π</p>
                <div id="exercise-explainer-list" class="space-y-4"></div>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-2xl font-bold mb-4 text-[#3357FF]">‡πÇ‡∏†‡∏ä‡∏ô‡∏≤‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•</h3>
                <p class="text-gray-600 mb-6">‡∏ö‡∏≠‡∏Å Gemini ‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏≠‡∏∞‡πÑ‡∏£ ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏ö‡∏ö‡πÑ‡∏´‡∏ô ‡πÅ‡∏•‡πâ‡∏ß AI ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå‡πÄ‡∏°‡∏ô‡∏π‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏î‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ü‡∏∑‡πâ‡∏ô‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì</p>
                
                <div class="space-y-4 mb-4">
                    <div>
                        <label for="ingredients-input" class="block text-sm font-medium text-gray-700 mb-1">‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ (‡πÄ‡∏ä‡πà‡∏ô ‡∏≠‡∏Å‡πÑ‡∏Å‡πà, ‡πÑ‡∏Ç‡πà, ‡∏Ç‡πâ‡∏≤‡∏ß‡∏Å‡∏•‡πâ‡∏≠‡∏á)</label>
                        <input type="text" id="ingredients-input" class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö ‡∏Ñ‡∏±‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏à‡∏∏‡∏•‡∏†‡∏≤‡∏Ñ">
                    </div>
                    <div class="flex items-center space-x-4">
                         <label class="block text-sm font-medium text-gray-700">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏©:</label>
                        <div class="flex items-center">
                            <input id="pref-protein" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                            <label for="pref-protein" class="ml-2 block text-sm text-gray-900">‡πÄ‡∏ô‡πâ‡∏ô‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô‡∏™‡∏π‡∏á</label>
                        </div>
                         <div class="flex items-center">
                            <input id="pref-veg" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                            <label for="pref-veg" class="ml-2 block text-sm text-gray-900">‡∏°‡∏±‡∏á‡∏™‡∏ß‡∏¥‡∏£‡∏±‡∏ï‡∏¥</label>
                        </div>
                    </div>
                </div>

                <button id="meal-suggester-btn" class="gemini-btn w-full md:w-auto">‚ú® ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå‡πÄ‡∏°‡∏ô‡∏π‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</button>
                <div id="meal-suggester-loader" class="hidden mt-4 mx-auto loader"></div>
                <div id="meal-suggester-result" class="mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200 hidden"></div>
            </div>
        </section>
        
        <footer class="text-center mt-12 py-6 border-t border-gray-300">
            <p class="text-gray-600">‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏ô‡∏∏‡∏Å‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á!</p>
            <p class="text-sm text-gray-500 mt-2">Infographic generated based on your personalized plan.</p>
        </footer>

    </div>

    <script>
        const FONT_COLOR = '#374151';
        const GRID_COLOR = '#e5e7eb';
        
        const wrapLabel = (label) => {
            const maxLength = 16;
            if (label.length <= maxLength) return label;
            
            const words = label.split(' ');
            const lines = [];
            let currentLine = '';
            
            words.forEach(word => {
                if ((currentLine + ' ' + word).trim().length > maxLength) {
                    lines.push(currentLine.trim());
                    currentLine = word;
                } else {
                    currentLine = (currentLine + ' ' + word).trim();
                }
            });
            if (currentLine) lines.push(currentLine.trim());
            
            return lines;
        };
        
        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            return Array.isArray(label) ? label.join(' ') : label;
        };

        const SHARED_CHART_OPTIONS = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: {
                        color: FONT_COLOR,
                        font: {
                            family: "'Kanit', sans-serif",
                            size: 14
                        }
                    }
                },
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback
                    },
                    titleFont: {
                        family: "'Kanit', sans-serif",
                    },
                    bodyFont: {
                         family: "'Kanit', sans-serif",
                    }
                }
            }
        };

        const WORKOUT_A_COLORS = ['#3b82f6', '#10b981', '#ef4444', '#f59e0b'];
        const workoutAData = {
            labels: ['‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≤ (Legs)', '‡∏™‡πà‡∏ß‡∏ô‡∏î‡∏∂‡∏á (Pull)', '‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏•‡∏±‡∏Å (Push)', '‡πÅ‡∏Å‡∏ô‡∏Å‡∏•‡∏≤‡∏á (Core)'],
            datasets: [{
                label: '‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏ü‡∏Å‡∏±‡∏™',
                data: [30, 25, 25, 20],
                backgroundColor: WORKOUT_A_COLORS,
                borderColor: '#ffffff',
                borderWidth: 2
            }]
        };
        new Chart(document.getElementById('workoutAChart'), {
            type: 'doughnut',
            data: workoutAData,
            options: { ...SHARED_CHART_OPTIONS,
                plugins: { ...SHARED_CHART_OPTIONS.plugins,
                    title: {
                        display: true,
                        text: 'Month 1: Full Body Focus Distribution',
                        color: FONT_COLOR,
                        font: { size: 16, family: "'Kanit', sans-serif" }
                    }
                }
            }
        });

        const WORKOUT_B_COLORS = ['#fb923c', '#a78bfa'];
        const workoutBData = {
            labels: ['Upper Body Days (2)', 'Lower Body Days (1)'],
            datasets: [{
                label: 'Total Weekly Sets',
                data: [30, 15],
                backgroundColor: WORKOUT_B_COLORS,
                borderRadius: 4
            }]
        };
        new Chart(document.getElementById('workoutBChart'), {
            type: 'bar',
            data: workoutBData,
            options: {
                ...SHARED_CHART_OPTIONS,
                scales: {
                    x: {
                        ticks: { color: FONT_COLOR, font: { family: "'Kanit', sans-serif" } },
                        grid: { display: false }
                    },
                    y: {
                        beginAtZero: true,
                        ticks: { color: FONT_COLOR, font: { family: "'Kanit', sans-serif" } },
                        grid: { color: GRID_COLOR }
                    }
                },
                plugins: { ...SHARED_CHART_OPTIONS.plugins,
                    title: {
                        display: true,
                        text: 'Month 2: Estimated Weekly Volume Split',
                        color: FONT_COLOR,
                        font: { size: 16, family: "'Kanit', sans-serif" }
                    },
                     legend: { display: false }
                }
            }
        });
        
        new Chart(document.getElementById('progressionChart'), {
            type: 'line',
            data: {
                labels: ['Start', 'Month 1 End', 'Month 2 End', 'Month 3 End'],
                datasets: [{
                    label: '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì',
                    data: [1, 2.5, 4, 5.5],
                    fill: true,
                    backgroundColor: 'rgba(51, 87, 255, 0.2)',
                    borderColor: '#3357FF',
                    tension: 0.3,
                    pointBackgroundColor: '#3357FF',
                    pointRadius: 5
                }]
            },
            options: {
                ...SHARED_CHART_OPTIONS,
                scales: {
                     x: {
                        ticks: { color: FONT_COLOR, font: { family: "'Kanit', sans-serif" } },
                        grid: { display: false }
                    },
                    y: {
                        beginAtZero: true,
                        ticks: { color: FONT_COLOR, font: { family: "'Kanit', sans-serif" } },
                        grid: { color: GRID_COLOR }
                    }
                },
                plugins: { ...SHARED_CHART_OPTIONS.plugins,
                    title: {
                        display: true,
                        text: '‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á (Progressive Overload)',
                        color: FONT_COLOR,
                        font: { size: 16, family: "'Kanit', sans-serif" }
                    },
                     legend: { display: false }
                }
            }
        });

        const apiKey = ""; 
        const textApiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
        const imageApiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image-preview:generateContent?key=${apiKey}`;

        const mealSuggestionSchema = {
            type: "OBJECT",
            properties: {
                "title": { "type": "STRING" },
                "description": { "type": "STRING" },
                "ingredients": {
                    "type": "ARRAY",
                    "items": {
                        "type": "OBJECT",
                        "properties": {
                            "name": { "type": "STRING" },
                            "quantity": { "type": "STRING" }
                        },
                        "required": ["name", "quantity"]
                    }
                },
                "instructions": {
                    "type": "ARRAY",
                    "items": { "type": "STRING" }
                }
            },
            "required": ["title", "description", "ingredients", "instructions"]
        };

        function renderMealSuggestion(meal) {
            let ingredientsHtml = meal.ingredients.map(i => `
                <li class="flex items-center">
                    <span class="font-semibold text-blue-800 mr-2">‚Ä∫</span>
                    <span><strong>${i.name}:</strong> ${i.quantity}</span>
                </li>
            `).join('');

            let instructionsHtml = meal.instructions.map(step => `
                <li class="flex">
                    <span class="mr-2 text-blue-800 font-bold"></span>
                    <span>${step}</span>
                </li>
            `).join('');

            return `
                <div class="space-y-4 text-left">
                    <h4 class="text-xl font-bold text-gray-800">${meal.title}</h4>
                    <p class="text-gray-600">${meal.description}</p>
                    <div>
                        <h5 class="font-semibold mb-2 text-lg">‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏™‡∏°:</h5>
                        <ul class="space-y-2 pl-2">${ingredientsHtml}</ul>
                    </div>
                    <div>
                        <h5 class="font-semibold mb-2 text-lg">‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥:</h5>
                        <ol class="space-y-2 list-decimal list-inside">${instructionsHtml}</ol>
                    </div>
                </div>
            `;
        }

        async function callGeminiForMealSuggestion(prompt, button, loader, resultContainer, retryCount = 3, delay = 1000) {
            button.disabled = true;
            loader.classList.remove('hidden');
            resultContainer.classList.add('hidden');
            resultContainer.innerHTML = '';
            
            const payload = { 
                contents: [{ parts: [{ text: prompt }] }],
                generationConfig: {
                    responseMimeType: "application/json",
                    responseSchema: mealSuggestionSchema
                }
            };

            try {
                const response = await fetch(textApiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                   if (response.status === 429 && retryCount > 0) {
                        await new Promise(resolve => setTimeout(resolve, delay));
                        return callGeminiForMealSuggestion(prompt, button, loader, resultContainer, retryCount - 1, delay * 2);
                    }
                    throw new Error(`API error: ${response.status}`);
                }
                
                const result = await response.json();
                const jsonText = result.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (jsonText) {
                    const mealData = JSON.parse(jsonText);
                    resultContainer.innerHTML = renderMealSuggestion(mealData);
                } else {
                    resultContainer.innerText = '‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ';
                }
            } catch (error) {
                 resultContainer.innerText = '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á';
            } finally {
                button.disabled = false;
                loader.classList.add('hidden');
                resultContainer.classList.remove('hidden');
            }
        }


        async function generateExerciseImage(exercise, button, loader, resultContainer, retryCount = 3, delay = 1000) {
            button.disabled = true;
            loader.classList.remove('hidden');
            resultContainer.classList.add('hidden');
            resultContainer.innerHTML = '';

            const prompt = `A clear, minimalist, instructional diagram showing the correct form for the '${exercise}' exercise. Anatomical or stick figure style. White background, simple lines, showing start and end positions.`;

            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                generationConfig: {
                    responseModalities: ['IMAGE']
                },
            };

            try {
                const response = await fetch(imageApiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    if (response.status === 429 && retryCount > 0) {
                        await new Promise(resolve => setTimeout(resolve, delay));
                        return generateExerciseImage(exercise, button, loader, resultContainer, retryCount - 1, delay * 2);
                    }
                    throw new Error(`API error: ${response.status}`);
                }

                const result = await response.json();
                const base64Data = result?.candidates?.[0]?.content?.parts?.find(p => p.inlineData)?.inlineData?.data;
                
                if (base64Data) {
                    const imageUrl = `data:image/png;base64,${base64Data}`;
                    resultContainer.innerHTML = `<img src="${imageUrl}" alt="Demonstration of ${exercise}" class="w-full rounded-lg shadow-md border">`;
                } else {
                     resultContainer.innerText = '‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ';
                }
            } catch (error) {
                resultContainer.innerText = '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á';
            } finally {
                button.disabled = false;
                loader.classList.add('hidden');
                resultContainer.classList.remove('hidden');
            }
        }
        
        const allExercises = [
            'Bodyweight Squat', 'Ring Rows', 'Ring Push-ups', 'Glute Bridge', 'Plank',
            'Lunges', 'Assisted Chin-ups', 'Shoulder Push-up', 'Hanging Knee Raises', 'Ring Face Pulls',
            'Split Squat', 'Ring Bicep Curl', 'Goblet Squat', 'Ring Dips', 'Bulgarian Push-ups',
            'Tricep Extensions', 'Wide Pull-ups', 'Archer Rows', 'Pistol Squat Progressions', 'Nordic Ham Curls', 'L-Sit'
        ];
        const uniqueExercises = [...new Set(allExercises)];

        const exerciseListContainer = document.getElementById('exercise-explainer-list');
        uniqueExercises.forEach(exercise => {
            const exerciseDiv = document.createElement('div');
            exerciseDiv.className = 'p-4 border rounded-lg';
            
            const headerDiv = document.createElement('div');
            headerDiv.className = 'flex justify-between items-center';
            
            const nameP = document.createElement('p');
            nameP.className = 'font-semibold';
            nameP.textContent = exercise;
            
            const button = document.createElement('button');
            button.className = 'gemini-btn';
            button.textContent = 'üé® ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏û‡∏™‡∏≤‡∏ò‡∏¥‡∏ï';
            
            headerDiv.appendChild(nameP);
            headerDiv.appendChild(button);

            const loader = document.createElement('div');
            loader.className = 'hidden mt-4 mx-auto loader';
            
            const resultDiv = document.createElement('div');
            resultDiv.className = 'mt-4 text-gray-700 hidden';

            exerciseDiv.appendChild(headerDiv);
            exerciseDiv.appendChild(loader);
            exerciseDiv.appendChild(resultDiv);
            
            exerciseListContainer.appendChild(exerciseDiv);

            button.addEventListener('click', () => {
                generateExerciseImage(exercise, button, loader, resultDiv);
            });
        });
        
        const mealSuggesterBtn = document.getElementById('meal-suggester-btn');
        const mealSuggesterLoader = document.getElementById('meal-suggester-loader');
        const mealSuggesterResult = document.getElementById('meal-suggester-result');

        mealSuggesterBtn.addEventListener('click', () => {
            const ingredients = document.getElementById('ingredients-input').value.trim();
            const isHighProtein = document.getElementById('pref-protein').checked;
            const isVegetarian = document.getElementById('pref-veg').checked;

            let prompt = '‡∏ä‡πà‡∏ß‡∏¢‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢ 1 ‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏î‡∏µ‡∏ï‡πà‡∏≠‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û ';
            if (isHighProtein) prompt += '‡πÇ‡∏î‡∏¢‡πÄ‡∏ô‡πâ‡∏ô‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô‡∏™‡∏π‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© ';
            if (isVegetarian) prompt += '‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏±‡∏á‡∏™‡∏ß‡∏¥‡∏£‡∏±‡∏ï‡∏¥ ';
            if (ingredients) prompt += `‡πÇ‡∏î‡∏¢‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏™‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏Ñ‡∏∑‡∏≠: ${ingredients} `;
            
            prompt += '‡∏ö‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô‡πÜ ‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏™‡∏° ‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢';
            
            callGeminiForMealSuggestion(prompt, mealSuggesterBtn, mealSuggesterLoader, mealSuggesterResult);
        });

        const tabButtons = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');

        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                tabButtons.forEach(btn => btn.classList.remove('active'));
                tabContents.forEach(content => content.classList.add('hidden'));

                button.classList.add('active');
                const targetId = button.id.replace('btn-', 'plan-');
                document.getElementById(targetId).classList.remove('hidden');
            });
        });

    </script>
</body>
</html>